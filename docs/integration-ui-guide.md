# Cursor統合機能 WebUI ユーザーガイド

## 概要

Chat History ManagerのCursor統合機能は、CursorのAIチャット履歴を自動的に取得・統合し、一元管理を可能にします。このガイドでは、WebUIを使用した統合機能の操作方法を説明します。

## 機能一覧

### 1. 統合ダッシュボード
- **パス**: `/integration`
- **機能**: Cursor統合の全体状況を一目で確認
- **表示内容**:
  - 統計情報（総セッション数、メッセージ数、Cursor統合率）
  - 監視ステータス
  - 最終同期時刻
  - 操作パネル

### 2. 統計情報表示
- **総セッション数**: 管理されている全セッション数
- **総メッセージ数**: 全メッセージの合計数
- **Cursorセッション数**: Cursorから統合されたセッション数
- **監視ステータス**: リアルタイム監視の状態

### 3. 操作機能
- **スキャン実行**: Cursorログの手動スキャン
- **初期化**: 統合機能の初期設定
- **監視開始/停止**: 自動監視の制御

## 使用方法

### 初回セットアップ

1. **統合ページにアクセス**
   ```
   http://localhost:3000/integration
   ```

2. **初期化の実行**
   - 「初期化」ボタンをクリック
   - Cursorのワークスペースパスが自動設定される
   - 初期化完了後、ステータスが更新される

3. **初回スキャンの実行**
   - 「スキャン実行」ボタンをクリック
   - Cursorログファイルが検索・解析される
   - 発見されたセッションが統合される

### 日常的な使用

#### 手動スキャン
1. 統合ダッシュボードにアクセス
2. 「スキャン実行」ボタンをクリック
3. スキャン結果を確認

#### 統計情報の確認
- ダッシュボードは1分ごとに自動更新
- 手動更新はページリロードで可能

#### Cursorセッションの閲覧
1. 「Cursorセッション」ボタンをクリック
2. Cursorから統合されたセッション一覧を表示
3. 個別セッションの詳細を確認

#### 検索機能
1. 「Cursor検索」ボタンをクリック
2. Cursorセッション限定の検索を実行

## UI コンポーネント

### 統計カード
```
┌─────────────────────┐
│ 📄 総セッション数    │
│ 1,234              │
└─────────────────────┘
```

### ステータス表示
- 🟢 **監視中**: 自動監視が有効
- 🔴 **停止中**: 自動監視が無効
- ⚠️ **エラー**: 問題が発生

### 操作ボタン
- **🔍 スキャン実行**: 手動スキャンを開始
- **⚙️ 初期化**: 統合機能を初期化
- **🔍 Cursor検索**: Cursor限定検索
- **📄 Cursorセッション**: Cursor統合セッション一覧

## エラー対応

### よくあるエラー

#### 1. 「Cursorログファイルが見つかりません」
**原因**: Cursorがインストールされていない、または異なるパスに配置
**対処法**:
1. Cursorがインストールされているか確認
2. 設定でパスを手動指定
3. 管理者権限で実行

#### 2. 「データベースアクセスエラー」
**原因**: SQLiteファイルへのアクセス権限不足
**対処法**:
1. ファイル権限を確認
2. Cursorを一度終了してから実行
3. 管理者権限で実行

#### 3. 「統計情報の取得に失敗」
**原因**: APIサーバーとの通信エラー
**対処法**:
1. APIサーバーが起動しているか確認
2. ネットワーク接続を確認
3. ページをリロード

### トラブルシューティング

#### デバッグ情報の確認
1. ブラウザの開発者ツールを開く（F12）
2. Consoleタブでエラーメッセージを確認
3. NetworkタブでAPI通信を確認

#### ログの確認
```bash
# APIサーバーのログ
npm run server

# 統合機能のログ
node dist/cli-integration.js
```

## 技術仕様

### 対応ブラウザ
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### システム要件
- Node.js 18+
- 2GB以上のRAM
- 1GB以上の空きディスク容量

### API エンドポイント
- `GET /api/integration/stats` - 統計情報取得
- `GET /api/integration/cursor/status` - Cursorステータス取得
- `POST /api/integration/cursor/scan` - スキャン実行
- `POST /api/integration/initialize` - 初期化

## セキュリティ

### データ保護
- ローカルストレージのみ使用
- 外部サーバーへのデータ送信なし
- 機密情報の自動マスキング

### アクセス制御
- ローカルホストからのアクセスのみ許可
- CORS設定による保護
- 入力値の検証

## パフォーマンス

### 最適化設定
- データキャッシュ: 30秒
- 自動更新間隔: 1分
- 最大表示件数: 1000件

### 推奨設定
- 大量データ処理時はバッチサイズを調整
- 定期的なデータベース最適化
- 不要なセッションの定期削除

## 更新履歴

### v1.0.0 (2024/01/15)
- 初回リリース
- 基本的な統合機能
- WebUIダッシュボード

### 今後の予定
- リアルタイム監視機能
- 高度な分析機能
- エクスポート機能
- バックアップ・復元機能

## サポート

### ヘルプ
- GitHub Issues: [プロジェクトURL]/issues
- ドキュメント: `/docs`
- FAQ: `/docs/faq.md`

### 貢献
- プルリクエスト歓迎
- バグレポート歓迎
- 機能要望歓迎 