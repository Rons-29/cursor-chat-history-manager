# 🚀 ChatFlow 統合タスクリスト

## 📋 **優先度別タスク管理**

### **🔥 最優先タスク (Phase 1)**

#### 1.1 バックエンド統合API実装
- [ ] **統合セッション取得API作成**
  - エンドポイント: `GET /api/sessions/all`
  - 3つのデータソース並列取得実装
  - セッションデータ正規化・統合
  - 重複除去ロジック実装
  - 見積時間: 1-2時間

- [ ] **統合検索API作成**
  - エンドポイント: `POST /api/search/all`
  - 全データソース横断検索実装
  - 検索結果マージ・ランキング
  - パフォーマンス最適化
  - 見積時間: 1時間

- [ ] **データソース選択API拡張**
  - クエリパラメータ: `?source=all|traditional|incremental|sqlite`
  - ユーザー選択式データソース表示
  - データソース別統計情報
  - 見積時間: 30分

### **⚡ 高優先タスク (Phase 2)**

#### 2.1 フロントエンド統合UI
- [ ] **データソース選択タブ実装**
  - 「全て」「Traditional」「Incremental」「SQLite」
  - データソース別件数表示
  - 見積時間: 45分

- [ ] **統合表示改善**
  - データソース情報をカードに表示
  - パフォーマンス指標の可視化
  - ローディング状態の改善
  - 見積時間: 30分

- [ ] **検索機能強化**
  - 全データソース横断検索
  - データソース別フィルター
  - 検索結果の統合表示
  - 見積時間: 30分

### **📊 中優先タスク (Phase 3)**

#### 3.1 UX最適化
- [ ] **用語改善**
  - 「横断検索」→「AI対話管理」（実態に合わせる）
  - データソース説明の追加
  - パフォーマンス指標の説明
  - 見積時間: 15分

- [ ] **設定保存機能**
  - ユーザーのデータソース選択を記憶
  - デフォルト表示設定
  - 統合/個別表示の選択
  - 見積時間: 30分

### **🔍 事前調査タスク**

- [ ] **現在のAPI状況確認**
  ```bash
  # Traditional データソースAPI確認
  curl http://localhost:3001/api/sessions?source=traditional
  
  # Incremental データソースAPI確認  
  curl http://localhost:3001/api/sessions?source=incremental
  
  # SQLite データソースAPI確認
  curl http://localhost:3001/api/sessions?source=sqlite
  ```
  - 見積時間: 15分

## 📊 **期待される成果**

### **問題解決**
- ❌ **現状**: 4,017セッション表示（39%のみ）
- ✅ **改善後**: 10,226セッション表示（100%）
- 🚀 **効果**: データ可視性 2.5倍向上

### **ユーザー体験向上**
- 🔍 **検索網羅性**: 4,017件 → 10,226件
- 🎯 **選択自由度**: 固定 → ユーザー選択式
- 📈 **データ理解**: パフォーマンス比較可能

### **技術的価値**
- ✅ **真の横断性**: 名前と実態の一致
- 📊 **パフォーマンス比較**: データソース別性能の可視化  
- 🛣️ **段階的移行**: SQLite移行の判断材料提供

## 🎯 **実装計画**

### **Step 1: 事前調査** (15分)
現在のAPI状況確認 → 実装方針決定

### **Step 2: バックエンド統合** (1-2時間)
統合API実装 → 全データソース並列取得

### **Step 3: フロントエンド改善** (1時間)
UI実装 → データソース選択・統合表示

### **Step 4: UX最適化** (30分)
用語改善・設定保存 → 完成

## 📋 **完了条件**

- [ ] **全データソース表示**: 10,226セッション全て表示可能
- [ ] **データソース選択**: ユーザーが自由に選択可能
- [ ] **パフォーマンス比較**: 各データソースの性能指標表示
- [ ] **検索統合**: 全データソース横断検索実行可能
- [ ] **用語一致**: 「横断検索」の名前と実態が一致

## 🚨 **重要な制約・注意事項**

- **データ整合性**: 重複データの適切な処理必須
- **パフォーマンス**: 10,226セッション表示時の応答速度確保
- **後方互換性**: 既存の検索機能を壊さない
- **エラーハンドリング**: 一部データソースが利用不可でも動作

---

**作成日**: 2025/06/05  
**更新予定**: 実装進捗に応じて随時更新  
**担当**: ChatFlow開発チーム  
**優先度**: 最高（ユーザー体験の根幹改善） 